version: 1

services:
    server:
        build: .
        expose: 
            - 8000
        environment: 
            - EMAIL: ${EMAIL}
            - EMAIL_PASSWORD: ${EMAIL_PASSWORD}
        ports:
            - 8000:8000
        volumes:
            - .:/app
        command: node server.js

    client:
        build: ./client
        expose: 
            - 3000
        ports:
            - 3000:3000
        volumes:
            - ./client/src:/app/client/src
            - ./client/public:/app/client/public
        links:
            - server
            
        command: npm start